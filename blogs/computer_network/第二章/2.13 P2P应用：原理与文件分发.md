#### 引出问题
文件分发问题
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201291053494.png)
#### C/S架构所需要的时间
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201291053643.png)
#### P2P架构所需要的时间
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201291053514.png)
#### 对比图
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201291053380.png)
C/S架构，随着用户数的增多，分发时间线性增长。
P2P架构，随着用户数的增多，分发时间趋于稳定。
### 具体实例
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201291059156.png)
在BitTorrent协议中，文件被分为一个一个的文件块（chunk），持有并交换同一个文件块的节点组叫做洪流（Torrent）。
新加入的**节点***（Alice）会先在追踪器（tracker）中注册自己的信息，获取节点清单并通过清单加入Torrent，通过加入Torrent和其他对等方（unchoked）建立TCP连接下载获取文件块，与此同时，Alice在下载时也会上传文件块给其他unchoked。
#### 细节信息
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201291105742.png)
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201291107837.png)
获取chunk的原则是：稀缺优先，如果你需要获取的chunk1有3个服务器有，chunk2有100个服务器有，就优先获取chunk1。
发送chunk的原则是：一报还一报（tit-for-tat），向想你发送速率最快的四个邻居发送chunk，并按时间动态评估。
除此之外，每隔一段时间还需要引入随机的节点，以产生动态变化。
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201291113585.png)
#### BT的问题
由于BT下载的基本原则是，我下载的东西可以用于传给别人。那么对于“版权属于作者”的这类文件，我对其进行了“没有授权的随意分发”，属于违法行为，美的政府是明令禁止的。不过呢BT也可以用来下载别的东西例如linux OS 镜像，开源软件等等。由于这个文件的版权属于广大人民群众，我可以随意下载随意分发。这个属于开发者和学术界喜闻乐见的分享源代码的行为，我们是要支持和拥护的。所以说呢，P2P文件系统（尤其是BT）和版权没有直接关系，但是由于这类文件系统的特点，大家常常用BT做一些“违反copyright的事情”。