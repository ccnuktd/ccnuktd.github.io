# HTTP连接的类型

HTTP的连接类型

>* 非持久性连接
>
>* 持久性连接

### 非持久性连接过程

![image-20220126143852242](https://gitee.com/ccnuktd/pic-bed/raw/master/image-20220126143852242.png)

![image-20220126144014660](https://gitee.com/ccnuktd/pic-bed/raw/master/image-20220126144014660.png)

在上面的过程中，HTTP客户端（浏览器）如果要加载10张jpeg图片，至少需要向服务器发送10次请求。具体例子，就是在网速比较慢的时候，加载图片是一张一张的。

![image-20220126144646219](https://gitee.com/ccnuktd/pic-bed/raw/master/image-20220126144646219.png)

再细致一点，每一次请求包括

> 发起和建立TCP连接：一个RTT
>
> 发送HTTP请求和接收一个包：一个RTT
>
> 包的传输时间
>
> Total = 2RTT + 文件传输时间

![image-20220126144745835](https://gitee.com/ccnuktd/pic-bed/raw/master/image-20220126144745835.png)

**非持久性连接的问题**

![image-20220126145004054](https://gitee.com/ccnuktd/pic-bed/raw/master/image-20220126145004054.png)

浏览器所能做的是并行建立10个TCP连接,同时处理10张图片,这样就在两个RTT中获得10张图片.

但是**TCP连接是非常消耗服务器资源的,因此多次建立TCP对服务器负担大.**

所以我们可以使用**持久性连接**

### 持久性连接过程

持久性连接不会断开TCP,传输完成以后不会立即关闭.

![image-20220126145410351](https://gitee.com/ccnuktd/pic-bed/raw/master/image-20220126145410351.png)