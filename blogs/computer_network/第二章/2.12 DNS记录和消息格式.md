# DNS记录和消息格式
### DNS的四种记录格式
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201290929119.png)
MX和CNAME的区别：前者查询的是邮箱服务器的规范主机名，后者则是其他服务器的规范主机名。
### DNS报文
对比HTTP、SMTP和DNS三种协议的类型
> HTTP：请求——相应
> SMTP：命令——相应
> DNS：查询——回复

下图是DNS报文的各字段的语义
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201290938046.png)

Q：DNS查询使用TCP还是UDP协议？
简要回答：在进行数据同步的时候，由于需要传输的信息大于512字节，一般使用的是TCP协议。而进行DNS查询的时候一般使用UDP协议以便于加快速度。
> [具体问题答案](http://www.jiangmen.gov.cn/bmpd/jmszwfwsjglj/ztzl/wlxxaq/xxjs/content/post_1858223.html)
### 如何注册域名
![](https://gitee.com/ccnuktd/pic-bed/raw/master/202201290947211.png)
> 上面例子说的提供权威域名解析服务器的名字和IP，其实并不是必要的条件。
> 如果我们企业很简单只需要一个网站，就只需要将
> (dns1.network.com, 212,234,234,222, A)插入到**注册登记机构的权威域名服务器**即可。
> 需要用到解析域名服务器的一般是大企业，需要搭建自己的内部网站，就会有内部的DNS解析服务器，对于外部网站的查询，先经过内部的DNS服务器，再去往外部。除此之外，内网的域名也不能被外部访问（因为外部的DNS服务器并没有内网的映射）