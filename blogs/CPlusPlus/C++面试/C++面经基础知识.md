# C++面经语法

### 简单的说一下static的用法。

static的使用主要分为三类：

1. 局部静态变量
2. 全局静态变量
3. 静态函数

局部静态变量的特点：

+ 处在内存的**静态存储区**

+ 如果没有初始化会被自动初始化为0

+ 由于static局部变量所在内存的**静态存储区**而非**栈区**，因此在函数调用结束后，static局部变量不会和局部变量一样消失。在下一次调用中，static局部变量会保存上一次调用结束时的值。

全局静态变量的特点：

+ 与局部静态变量的1，2点相同。

+ 全局静态变量和全局变量有些相似，在单文件编译的时候，两者基本上无区别。但是在多文件进行编译时，全局变量可以在多文件中使用，但是全局静态变量只能在声明的文件中使用。

静态函数的特点：

静态函数可用分为类静态成员函数和普通的静态函数。

+ 对于类静态成员函数，调用这个函数只能访问或修改带有static数据成员，不能访问或修改没有带有

static的数据成员。

+ 对于普通的静态函数，静态函数和普通函数之间的区别，类似于静态全局变量和全局变量之间的区别。在单文件进行编译的时候，没有什么区别。但是多文件进行编译时，static函数只能在声明的文件中被调用，在其他文件中不能被调用。

在写算法的时候，经常使用static函数加快速度，因为static函数不是定义在栈区，不会像普通函数那样进行压栈和出栈。因此速度会快很多。

### 说一下C++和C的区别

在设计思想上：C++是面向对象的语言，C是面向过程的语言。

在语法角度中：C++中有类的概念，并且会有相应的类的技术——封装，继承和多态。

C++支持泛型编程，比如STL模板类，模板函数。

下面是一个模板函数的例子：

```c++
template<typename T> void Swap(T *a, T *b){
    T temp = *a;
    *a = *b;
    *b = temp;
}
```

### C++ 四种cast转换

四种cast转换分别指的是：

>const_cast
>
>static_cast
>
>dynamic_cast
>
>reintepret_cast

**const_cast**：去除const属性，一般用于 const 类型 转换为 非const 类型。4种转换中只有它能实现这个功能

**static_cast**：一般用于向上的转换例如，char转int，int转double，void\*转int\*。不能用于无关类型的转换，如student\*转换int\*（除非student\*内部有int\*转换函数）

**dynamic_cast**：非常慢，可以向上或向下转换。向上转换安全，但是向下转换可能会出错。

举例：

![img](http://c.biancheng.net/cpp/uploads/allimg/170220/1-1F220145TLW.jpg)

在这条继承链中，D继承C，C继承B，B继承A，A为基类。

```c++
//向下转换失败
D d(···);
A* pa = new B();	
pa = dynamic_cast<D*>&d;	//失败，因为在继承链中，A*的对象是B，继承链中向上无法找到D
```

```c++
//向下转换成功
B b(···);
A* pa = new D();
pa = dynamic_cast<B*>&b;	//成功，因为在继承链中，A*的对象是D，继承链中向上能找到B
```

**reinterpret_cast**：最灵活也最不安全的转换，相当于直接和编译器解释某一块区域。

举例说明：

```c++
double a = 100;
int b = reinterpret_cast<int> a;
```

下面这段代码非常不安全，相当于把a在内存中的4个字节，截取出来给b，b的值会非常奇怪。

### C与C++有什么区别？

抽象层面：

在effective c++中，提到了C++是一门集合性的语言，由四个相对独立和集合构成：C++中的C模块，C++中的OOP模块，C++中的STL模块，C++类模板。如果把C++这样分类就可以明显看出C++与C的区别了。C是C++的子集，C++除了C的部分还有三种不同的集合。。。

具体层面：

malloc和new

class

&

等等

### int \*p[10]和int (\*p)[10]的区别

首先需要明确，对于修饰一个变量，右边的优先级高于左边

换句话说int \*p[10]和int *(p[10])是一回事

明白了这一点就容易区别了，int \*(p[10])是一个含有10个东西（这个地方想不出更好的词）的数组，每一个东西都是一个int \*指针。

而int (*p)[10]是一个指针，这个指针指向了int [10]的东西，也就是说这是一个数组指针。

### static关键字的作用

想想自己是怎么用这个关键字的

局部static变量：函数局部不销毁

类的static函数：无this指针，只能访问static数据成员，声明在外面

类的static成员：声明在外面（除非加上const）

### \#define和const的区别

预编译和编译

内存消耗

类型检查

### 动态链接与静态链接的区别

简单的来说，静态链接在**编译链接**时将需要的代码直接直接拷贝到目的地，生成可执行文件 。

动态链接在编译链接时没有将需要的代码拷贝到目的地，而是做一个标记，在程序运行的时候，把资源交给操作系统，操作系统把资源调入内存。在共享执行内存中找到这些这些代码，在运行时链接。

优缺点比较：

静态链接的优点：如果已经编译出可执行文件后，就不需要库了，因为需要的代码已经在exe文件中了。

静态链接的缺点：链接出来的程序体积较大，而且如果库发生了更新，那就需要重新链接。

动态链接的优点：链接出来的程序体积比较小，也不会因为库发生更新就需要重新链接。除此之外链接库可以供很多程序使用

动态链接的缺点：运行是链接会影响程序性能。
